<div class="form-container">
  
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">{{ isEditMode ? 'Edit Case File' : 'New Case Report' }}</h1>
      <p class="page-subtitle">
        {{ isEditMode ? 'Update incident details and status.' : 'Register a new criminal incident into the database.' }}
      </p>
    </div>
    
    <a mat-button routerLink="/cases" class="cancel-btn">
      <mat-icon>close</mat-icon> Cancel
    </a>
  </div>

  <mat-card class="form-card">
    <form (ngSubmit)="onSubmit()" #caseForm="ngForm">
      
      <div class="form-grid">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Incident Title</mat-label>
          <input matInput placeholder="e.g. Vehicle Theft at Market" [(ngModel)]="formData.title" name="title" required>
          <mat-icon matSuffix>title</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Location / Area</mat-label>
          <input matInput placeholder="e.g. Panaji" [(ngModel)]="formData.location" name="location" required>
          <mat-icon matSuffix>place</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Current Status</mat-label>
          <mat-select [(ngModel)]="formData.status" name="status" required>
            <mat-option value="OPEN">Open</mat-option>
            <mat-option value="UNDER_INVESTIGATION">Under Investigation</mat-option>
            <mat-option value="CLOSED">Closed</mat-option>
          </mat-select>
          <mat-icon matSuffix>info</mat-icon>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Assigned Officer</mat-label>
          <input matInput placeholder="e.g. Det. J. Silva" [(ngModel)]="formData.officer_assigned" name="officer">
          <mat-icon matSuffix>badge</mat-icon>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full-width mt-2">
        <mat-label>Incident Description</mat-label>
        <textarea matInput rows="6" placeholder="Detailed report of the incident..." [(ngModel)]="formData.description" name="description"></textarea>
      </mat-form-field>

      <div class="form-actions">
        <button type="button" mat-stroked-button routerLink="/cases">Discard</button>
        
        <button mat-raised-button color="primary" type="submit" [disabled]="!caseForm.form.valid || isLoading">
          <mat-icon>{{ isEditMode ? 'save' : 'add_circle' }}</mat-icon>
          {{ isEditMode ? 'Save Changes' : 'Create Record' }}
        </button>
      </div>

    </form>
  </mat-card>
</div>